name: Continuous Integration testing with pytest
on:
  push:
jobs:
  build-and-test:
    runs-on: self-hosted
    steps:
  # Get src code
    - name: Check out repository
      uses: actions/checkout@v4
  # Creates and activates a virtual environment
    - uses: getsentry/action-setup-venv@v1.0.4
      id: venv
      with:
        python-version: 3.10.7
        cache-dependency-path: |
          requirements.txt
        install-cmd: pip install -r requirements.txt
    # Run Test
    - name: Run pytest
      uses: pavelzw/pytest-action@v2.1.0
